# ReflectCam

这是一个简单的 Mac 应用程序，可以调用 MacBook 摄像头并将视频显示在桌面应用的最上层。

## 功能特性

- **圆形摄像头窗口** - 300x300像素的圆形摄像头预览窗口
- **彩色模糊阴影** - 多层彩色阴影效果，包含紫色、粉色、青色渐变
- **状态栏控制** - 通过状态栏图标控制摄像头的显示/隐藏
- **无边框设计** - 移除传统窗口标题栏，实现纯净视觉效果
- **窗口置顶显示** - 窗口始终保持在所有其他应用程序之上
- **权限管理** - 自动请求摄像头访问权限
- **纯代码实现** - 不依赖Storyboard，使用纯Swift代码构建UI

## 构建和运行

### 前提条件

- macOS 13.0 或更高版本
- Xcode 15.0 或更高版本
- 具有摄像头的 Mac 设备

### 快速开始

**最简单的方式：**

1. 打开终端，导航到项目目录：
   ```bash
   cd /Users/allenwang/Desktop/testLinearSolver/mac-video
   ```

2. 运行构建脚本：
   ```bash
   ./build_and_run.sh
   ```

### 手动构建步骤

**方法一：使用 Xcode**

1. 使用 Xcode 打开项目：
   ```bash
   open ReflectCam.xcodeproj
   ```

2. 在 Xcode 中：
   - 选择目标设备（Mac）
   - 点击运行按钮（⌘+R）

**方法二：命令行构建**

```bash
# 构建项目
xcodebuild -project ReflectCam.xcodeproj -scheme ReflectCam -configuration Debug

# 查找并运行应用
find ~/Library/Developer/Xcode/DerivedData -name "ReflectCam.app" -path "*/Debug/*" | head -1 | xargs open
```

## 使用说明

### 状态栏控制
- 应用启动后会在状态栏显示摄像头图标 📷
- **左键点击图标** - 切换摄像头窗口的显示/隐藏
- **右键点击图标** - 显示菜单选项：
  - 显示摄像头
  - 隐藏摄像头
  - 退出应用

### 摄像头窗口
- 圆形设计，尺寸为300x300像素
- 带有多层彩色模糊阴影效果
- 无标题栏，纯净视觉体验
- 始终保持在最上层显示
- 首次运行时需要授权摄像头访问权限

## 权限说明

应用需要以下权限：
- **摄像头访问权限** - 用于获取摄像头视频流
- **沙盒权限** - 确保应用安全运行

首次运行时，macOS会弹出权限请求对话框，请点击"允许"以正常使用应用功能。

## 视觉效果

### 圆形窗口设计
- 主窗口：240x240像素圆形摄像头预览
- 背景：透明无边框设计
- 位置：屏幕居中显示

### 彩色阴影效果
- **紫色阴影** - 主要阴影，半径20像素，透明度80%
- **粉色阴影** - 右上偏移，半径15像素，透明度60%
- **青色阴影** - 左下偏移，半径12像素，透明度50%
- **模糊效果** - 多层叠加产生丰富的视觉层次

## 技术实现

- **语言**：Swift
- **框架**：
  - AVFoundation（摄像头捕获）
  - Cocoa（用户界面）
  - Core Animation（视频渲染）
- **架构**：MVC 模式

## 故障排除

### 摄像头无法访问
- 检查系统隐私设置中的摄像头权限
- 确保没有其他应用正在使用摄像头
- 重启应用或重新授权

### 窗口不在最上层
- 通过菜单栏切换 "Always on Top" 选项
- 检查系统的窗口管理设置

### 构建错误
- 确保 Xcode 版本兼容
- 检查 macOS 版本要求
- 清理构建缓存（Product > Clean Build Folder）